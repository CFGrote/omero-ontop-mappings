[PrefixDeclaration]
:		https://www.openmicroscopy.org/omemap/
owl:		http://www.w3.org/2002/07/owl#
rdf:		http://www.w3.org/1999/02/22-rdf-syntax-ns#
xml:		http://www.w3.org/XML/1998/namespace
xsd:		http://www.w3.org/2001/XMLSchema#
obda:		https://w3id.org/obda/vocabulary#
rdfs:		http://www.w3.org/2000/01/rdf-schema#
omemap:		https://www.openmicroscopy.org/omemap#
ome_core:	http://www.openmicroscopy.org/rdf/2016-06/ome_core/
ome_instance:	https://example.org/site/

[MappingDeclaration] @collection [[
mappingId	MAPID-project
target		ome_instance:Project/{project_id} a ome_core:Project ; rdfs:label {project_name} ; rdfs:comment {project_description} ; ome_core:dataset ome_instance:Dataset/{dataset_id} ; <{map_key}> {map_value} . 
source		select
			project.id as project_id,
			projectannotationlink.child as annotation_id,
			projectdatasetlink.child as dataset_id,
			project.name as project_name,
			project.description as project_description,
			concat(annotation.ns, annotation_mapvalue.name) as map_key,
			annotation_mapvalue.value as map_value
			from project
			join projectannotationlink on projectannotationlink.parent = project.id
			join annotation on projectannotationlink.child = annotation.id
			join annotation_mapvalue on annotation.id = annotation_mapvalue.annotation_id
			join projectdatasetlink on project.id = projectdatasetlink.parent;

mappingId	MAPID-dataset
target		ome_instance:Dataset/{dataset_id} a ome_core:Dataset ; rdfs:label {dataset_name} ; rdfs:comment {dataset_description} ; ome_core:image ome_instance:Image/{image_id} ; <{map_key}> {map_value} . 
source		select
			dataset.id as dataset_id,
			datasetannotationlink.child as annotation_id,
			datasetimagelink.child as image_id,
			dataset.name as dataset_name,
			dataset.description as dataset_description,
			concat(annotation.ns, annotation_mapvalue.name) as map_key,
			annotation_mapvalue.value as map_value
			from dataset, datasetannotationlink, annotation, annotation_mapvalue, datasetimagelink
			where (datasetannotationlink.parent = dataset.id AND datasetannotationlink.child = annotation.id AND annotation.id = annotation_mapvalue.annotation_id AND dataset.id = datasetimagelink.parent);

mappingId	MAPID-Image
target		ome_instance:Image/{image_id} a ome_core:Image ; rdfs:label {image_name} ; rdfs:comment {image_description} ; <{map_key}> {map_value} . 
source		select
			image.id as image_id,
			imageannotationlink.child as annotation_id,
			image.name as image_name,
			image.description as image_description,
			concat(annotation.ns, annotation_mapvalue.name) as map_key,
			annotation_mapvalue.value as map_value
			from image
			join imageannotationlink on imageannotationlink.parent = image.id
			join annotation on imageannotationlink.child = annotation.id
			join annotation_mapvalue on annotation.id = annotation_mapvalue.annotation_id;

mappingId	MAPID-experimentergroup
target		ome_instance:ExperimenterGroup/{experimentergroup_id} a ome_core:ExperimenterGroup . 
source		select
			experimentergroup.id as experimentergroup_id
			from experimentergroup ;

mappingId	MAPID-experiment
target		ome_instance:Experiment/{experiment_id} a ome_core:Experiment . 
source		select
			experiment.id as experiment_id
			from experiment ;

mappingId	MAPID-well
target		ome_instance:Well/{well_id} a ome_core:Well . 
source		select
			well.id as well_id
			from well ;

mappingId	MAPID-wellsample
target		ome_instance:WellSample/{wellsample_id} a ome_core:WellSample . 
source		select
			wellsample.id as wellsample_id
			from wellsample ;

mappingId	MAPID-reagentset
target		ome_instance:ReagentSet/{reagentset_id} a ome_core:ReagentSet . 
source		select
			reagent.id as reagentset_id
			from reagent ;
]]

